/** Kinoarhiv v3.1.0 - Kinoarhiv component for Joomla - https://киноархив.com/ - License GPL-2.0 - Author : Viper / https://киноархив.com/ */
function empty(e){var t,a,n,i,r=[t,null,!1,0,"","0"];for(n=0,i=r.length;i>n;n++)if(e===r[n])return!0;if("object"==typeof e){for(a in e)if(e.hasOwnProperty(a))return!1;return!0}return!1}Kinoarhiv=window.Kinoarhiv||{},KA_vars=window.KA_vars||{},function(e,t){"use strict";e.getFormToken=function(){return jQuery('input[type="hidden"]').filter(function(){return/^[0-9A-F]{32}$/i.test(this.name)}).attr("name")},e.checkall=function(e,a){jQuery(t).ready(function(t){t(e).is(":checked")?t(":checkbox",a).prop("checked",!0):t(":checkbox",a).prop("checked",!1)})},e.showLoading=function(e,a){jQuery(t).ready(function(t){var n=t(".modal-loading:hidden").length++;if("show"===e){var i="document"===a.selector||"body"===a.selector?"fixed":"absolute",r=a.offset(),o="undefined"==typeof r?0:r.top,l="undefined"==typeof r?0:r.left,u=a.outerWidth(),d=a.innerHeight(),s='<div class="modal-backdrop modal-loading" id="mdl'+n+'" style="position: '+i+"; top: "+o+"px; left: "+l+"px; width: "+u+"px; height: "+d+'px; z-index: 10001;"><div class="ajax-loading" style="cursor: pointer;" title="Press to close">&nbsp;</div></div>';"document"===a.selector||"body"===a.selector?t(s).prependTo(a):t(s).insertAfter(a),t(".modal-backdrop").on("click",".ajax-loading",function(){t(this).parent().remove()})}else"document"===a.selector||"body"===a.selector?a.find("div#mdl"+n).remove():a.next("div#mdl"+n).remove()})},e.openWindow=function(e){var t=window.open(e);t||Aurora.message([{text:KA_vars.language.COM_KA_NEWWINDOW_BLOCKED_A+e+KA_vars.language.COM_KA_NEWWINDOW_BLOCKED_B,type:"alert"}],"#system-message-container",{replace:!0})},e.formatItemTitle=function(e,t,a,n){var i="";return empty(e)?"":("undefined"==typeof e||empty(e)||(i+=e),empty(e)||empty(t)||(i+="undefined"==typeof n||empty(n)?" / ":n),"undefined"==typeof t||empty(t)||(i+=t),empty(a)||"0000"===a||"0000-00-00"===a||(i+=" ("+a+")"),i)}}(Kinoarhiv,document),jQuery(document).ready(function(e){jQuery.fn.select2&&e(".hasAutocomplete").each(function(t,a){if(!e(a).data("select2-disabled")){var n=e(a),i={},r=n.data("url"),o=n.data("lang")||"",l=n.data("content"),u=n.attr("multiple"),d=n.data("remote"),s=n.data("sortable"),c=n.data("minimum-input-length"),m=n.data("maximum-selection-size"),f=n.data("remote-show-all"),p=n.data("ignore-ids")||"",v=KA_vars.api_root||"",h=KA_vars.img_root||"",y=["countries","vendors","movieGenres","nameGenres","albumGenres","trackGenres","artistGenres","tags","amplua","mediatypes"];if(i.placeholder=empty(n.data("placeholder"))?KA_vars.language.JGLOBAL_SELECT_AN_OPTION:n.data("placeholder"),i.allowClear=n.data("allow-clear"),c&&(i.minimumInputLength=parseInt(c,10)),m&&(i.maximumSelectionSize=parseInt(m,10)),d===!0||d===!1&&e.inArray(l,y))u&&(i.multiple=!0),r||(empty(p)||(p="&ignore_ids[]="+[p].join("&ignore_ids[]=")),empty(o)||(o="&data_lang="+o),r=v+"index.php?option=com_kinoarhiv&task=api.data&content="+l+"&format=json&tmpl=component&lang="+KA_vars.language.tag.substr(0,2)+o+p+"&"+Kinoarhiv.getFormToken()+"=1"),i.id=function(e){return empty(n.data("key"))?e.value:e[n.data("key")]},i.ajax={cache:!0,url:r,quietMillis:250,data:function(e,t){return{term:e,showAll:f?1:0,page:t}},results:function(e,t){var a=30*t<e.total_count;return{results:e,more:a}}},i.initSelection=function(t,a){var n=e(t).val();empty(n)||e.ajax(r,{data:{id:n,multiple:u?1:0},cache:!0}).done(function(e){a(e)})};else if("true"===s||s){var g=n.data("content-value"),x=g.length;u&&(i.multiple=!0),i.initSelection=function(t,a){var n=[];"countries"===l?e(t.val().split(",")).each(function(){var e=0;for(e;x>e;e++)g[e].value==this&&n.push({value:g[e].value,text:g[e].text,code:g[e].code})}):e(t.val().split(",")).each(function(){var e=0;for(e;x>e;e++)g[e].value==this&&n.push({value:g[e].value,text:g[e].text})}),a(n)},i.id=function(e){return empty(n.data("key"))?e.value:e[n.data("key")]},i.query=function(e){var t={results:[]},a=0;if("countries"===l)for(a;x>a;a++)t.results.push({value:g[a].value,text:g[a].text,code:g[a].code});else t=g;e.callback(t)}}i.formatResult=function(t){var a="";if("countries"===l){if(t.length<1)return"";var n=d===!0||"true"===s||s?t.code:e(t.element).data("country-code");return'<img class="flag-dd" src="'+h+"media/com_kinoarhiv/images/icons/countries/"+n+'.png"/>'+t.text}if("names"===l)return d===!0?Kinoarhiv.formatItemTitle(t.name,t.latin_name,t.date_of_birth):t.text;if("movies"===l||"albums"===l){var i=d===!0||"true"===s||s?t.year:e(t.element).data("year");return a=empty(t.text)?t.title:t.text,Kinoarhiv.formatItemTitle(a,"",i)}return t.text},i.formatSelection=function(t){var a="";if("countries"===l){if(t.length<1)return"";var n=d===!0||"true"===s||s?t.code:e(t.element).data("country-code");return'<img class="flag-dd" src="'+h+"media/com_kinoarhiv/images/icons/countries/"+n+'.png"/>'+t.text}if("names"===l)return d===!0?Kinoarhiv.formatItemTitle(t.name,t.latin_name,t.date_of_birth):t.text;if("movies"===l||"albums"===l){var i=d===!0||"true"===s||s?t.year:e(t.element).data("year");return a=empty(t.text)?t.title:t.text,Kinoarhiv.formatItemTitle(a,"",i)}return t.text},i.escapeMarkup=function(e){return e};var _=n.select2(i);("true"===s||s)&&_.select2("container").find("ul.select2-choices").sortable({containment:"parent",start:function(){n.select2("onSortStart")},update:function(){n.select2("onSortEnd")}})}}),jQuery.fn.slider&&e(".hasSlider").each(function(t,a){var n=e(a);if(!n.data("slider-disabled")){var i=n.slider();i.on("slide",function(t){"undefined"==typeof n.data("slider-input-min")||empty(n.data("slider-input-min"))||e(n.data("slider-input-min")).val(t.value[0]),"undefined"==typeof n.data("slider-input-max")||empty(n.data("slider-input-max"))||e(n.data("slider-input-max")).val(t.value[1])})}})});