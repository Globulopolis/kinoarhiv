/** Kinoarhiv v3.1.0 - Kinoarhiv component for Joomla - https://киноархив.com/ - License GPL-2.0 - Author : Viper / https://киноархив.com/ */
function empty(e){var t,a,n,i,r=[t,null,!1,0,"","0"];for(n=0,i=r.length;i>n;n++)if(e===r[n])return!0;if("object"==typeof e){for(a in e)if(e.hasOwnProperty(a))return!1;return!0}return!1}function getParameterByName(e,t){e=e.replace(/[\[\]]/g,"\\$&");var a=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),n=a.exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}Kinoarhiv=window.Kinoarhiv||{},KA_vars=window.KA_vars||{},function(e,t){"use strict";e.getFormToken=function(){return jQuery('input[type="hidden"]').filter(function(){return/^[0-9A-F]{32}$/i.test(this.name)}).attr("name")},e.checkall=function(e,a){jQuery(t).ready(function(t){t(e).is(":checked")?t(":checkbox",a).prop("checked",!0):t(":checkbox",a).prop("checked",!1)})},e.showLoading=function(e,a){jQuery(t).ready(function(t){var n=t(".modal-loading:hidden").length++;if("show"===e){var i="document"===a.selector||"body"===a.selector?"fixed":"absolute",r=a.offset(),o="undefined"==typeof r?0:r.top,d="undefined"==typeof r?0:r.left,l=a.outerWidth(),u=a.innerHeight(),c='<div class="modal-backdrop modal-loading" id="mdl'+n+'" style="position: '+i+"; top: "+o+"px; left: "+d+"px; width: "+l+"px; height: "+u+'px; z-index: 10001;"><div class="ajax-loading" style="cursor: pointer;" title="Press to close">&nbsp;</div></div>';"document"===a.selector||"body"===a.selector?t(c).prependTo(a):t(c).insertAfter(a),t(".modal-backdrop").on("click",".ajax-loading",function(){t(this).parent().remove()})}else"document"===a.selector||"body"===a.selector?a.find("div#mdl"+n).remove():a.next("div#mdl"+n).remove()})},e.openWindow=function(e){var t=window.open(e);t||Aurora.message([{text:KA_vars.language.COM_KA_NEWWINDOW_BLOCKED_A+e+KA_vars.language.COM_KA_NEWWINDOW_BLOCKED_B,type:"alert"}],"#system-message-container",{replace:!0})},e.formatItemTitle=function(e,t,a,n){var i="";return empty(e)?"":("undefined"==typeof e||empty(e)||(i+=e),empty(e)||empty(t)||(i+="undefined"==typeof n||empty(n)?" / ":n),"undefined"==typeof t||empty(t)||(i+=t),empty(a)||"0000"===a||"0000-00-00"===a||(i+=" ("+a+")"),i)}}(Kinoarhiv,document),jQuery(document).ready(function(e){jQuery.fn.select2&&e(".hasAutocomplete").each(function(t,a){if(!e(a).data("select2-disabled")){var n=e(a),r={},o=n.data("url"),d=n.data("lang")||"",l=n.data("type")||"",u=n.data("content"),c=n.attr("multiple"),s=n.data("remote"),m=n.data("sortable"),p=n.data("minimum-input-length"),f=n.data("max-selection"),v=n.data("ignore-ids")||"",y=KA_vars.api_root||"",h=KA_vars.img_root||"",g={},x=["countries","vendors","genres","tags","amplua","mediatypes"];if(r.placeholder=empty(n.data("placeholder"))?KA_vars.language.JGLOBAL_SELECT_AN_OPTION:n.data("placeholder"),r.allowClear=n.data("allow-clear"),p&&(r.minimumInputLength=parseInt(p,10)),f&&(r.maximumSelectionSize=parseInt(f,10)),s===!0||s===!1&&e.inArray(u,x))c&&(r.multiple=!0),o||(empty(v)||(v="&ignore_ids[]="+[v].join("&ignore_ids[]=")),""!==d&&"undefined"!=typeof d&&(d="&data_lang="+d),""!==l&&"undefined"!=typeof l&&(l="&data_type="+l),o=y+"index.php?option=com_kinoarhiv&task=api.data&content="+u+"&format=json&tmpl=component&lang="+KA_vars.language.tag.substr(0,2)+d+v+l+"&"+Kinoarhiv.getFormToken()+"=1"),r.id=function(e){return empty(n.data("key"))||void 0===e[n.data("key")]?e.value:e[n.data("key")]},r.ajax={cache:!0,url:o,quietMillis:250,data:function(e,t){return{term:e,page:t}},results:function(e,t){var a=30*t<e.total_count;return{results:e,more:a}}},r.initSelection=function(t,a){var n=e(t).val();empty(n)||e.ajax(o,{data:{id:n,multiple:c?1:0},cache:!0}).done(function(e){a(e)})};else if("true"===m||m){var _=n.data("content-value"),k=_.length;c&&(r.multiple=!0),r.initSelection=function(t,a){var n=[];e(t.val().split(",")).each(function(){var e=0;for(e;k>e;e++)_[e].value==this&&("countries"===u?n.push({value:_[e].value,text:_[e].text,code:_[e].code}):n.push({value:_[e].value,text:_[e].text}))}),a(n)},r.id=function(e){return empty(n.data("key"))||void 0===e[n.data("key")]?e.value:e[n.data("key")]},r.query=function(e){var t=[];if("countries"===u)for(i=0;i<k;i++)t.push({value:_[i].value,text:_[i].text,code:_[i].code});else t=_;e.callback({results:t})}}r.formatResult=function(t){var a="";if("countries"===u){if(t.length<1)return"";var n=s===!0||"true"===m||m?t.code:e(t.element).data("country-code");return'<img class="flag-dd" src="'+h+"media/com_kinoarhiv/images/icons/countries/"+n+'.png"/>'+t.text}if("names"===u)return s===!0?Kinoarhiv.formatItemTitle(t.name,t.latin_name,t.date_of_birth):t.text;if("movies"===u||"albums"===u){var i=s===!0||"true"===m||m?t.year:e(t.element).data("year");return a=empty(t.text)?t.title:t.text,Kinoarhiv.formatItemTitle(a,"",i)}return t.text},r.formatSelection=function(t){var a="";if("countries"===u){if(t.length<1)return"";var n=s===!0||"true"===m||m?t.code:e(t.element).data("country-code");return'<img class="flag-dd" src="'+h+"media/com_kinoarhiv/images/icons/countries/"+n+'.png"/>'+t.text}if("names"===u)return s===!0?Kinoarhiv.formatItemTitle(t.name,t.latin_name,t.date_of_birth):t.text;if("movies"===u||"albums"===u){var i=s===!0||"true"===m||m?t.year:e(t.element).data("year");return a=empty(t.text)?t.title:t.text,Kinoarhiv.formatItemTitle(a,"",i)}return t.text},r.escapeMarkup=function(e){return e};try{g=n.select2(r)}catch(b){return console.error("Something went wrong!"),!1}("true"===m||m)&&g.select2("container").find("ul.select2-choices").sortable({containment:"parent",start:function(){n.select2("onSortStart")},update:function(){n.select2("onSortEnd")}})}}),jQuery.fn.slider&&e(".hasSlider").each(function(t,a){var n=e(a);if(!n.data("slider-disabled")){var i=n.slider();i.on("slide",function(t){"undefined"==typeof n.data("slider-input-min")||empty(n.data("slider-input-min"))||e(n.data("slider-input-min")).val(t.value[0]),"undefined"==typeof n.data("slider-input-max")||empty(n.data("slider-input-max"))||e(n.data("slider-input-max")).val(t.value[1])})}})});