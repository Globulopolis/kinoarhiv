/** Kinoarhiv v3.1.0 - Kinoarhiv component for Joomla - https://киноархив.com/ - License GPL-2.0 - Author : Viper / https://киноархив.com/ */
function empty(e){var t,a,n,r,i=[t,null,!1,0,"","0"];for(n=0,r=i.length;r>n;n++)if(e===i[n])return!0;if("object"==typeof e){for(a in e)if(e.hasOwnProperty(a))return!1;return!0}return!1}function showMsg(e,t,a,n,r){a="undefined"==typeof a?"after":a,n="undefined"==typeof n||empty(n)?"close":n,r="undefined"==typeof r||empty(r)?KA_vars.language.COM_KA_CLOSE:r,e="object"==typeof e?e:jQuery(e),jQuery.fn.aurora&&e.aurora({text:t,placement:a,button:n,button_title:"["+r+"]"})}Kinoarhiv=window.Kinoarhiv||{};var KA_vars={};!function(e,t){"use strict";e.getFormToken=function(){return jQuery('input[type="hidden"]').filter(function(){return/^[0-9A-F]{32}$/i.test(this.name)}).attr("name")},e.checkall=function(e,a){jQuery(t).ready(function(t){t(e).is(":checked")?t(":checkbox",a).prop("checked",!0):t(":checkbox",a).prop("checked",!1)})},e.blockUI=function(e){jQuery(t).ready(function(a){"show"===e?a('<div class="modal-backdrop" style="z-index: 10002;"></div>').appendTo(t.body).show():a(".modal-backdrop").remove()})},e.showLoading=function(e,a){jQuery(t).ready(function(t){var n=t(".modal-loading:hidden").length++;if("show"===e){var r="document"===a.selector||"body"===a.selector?"fixed":"absolute",i=a.offset(),o="undefined"==typeof i?0:i.top,l="undefined"==typeof i?0:i.left,u=a.outerWidth(),d=a.innerHeight(),c='<div class="modal-backdrop modal-loading" id="mdl'+n+'" style="position: '+r+"; top: "+o+"px; left: "+l+"px; width: "+u+"px; height: "+d+'px; z-index: 10001;"><div class="ajax-loading" style="cursor: pointer;" title="Press to close">&nbsp;</div></div>';"document"===a.selector||"body"===a.selector?t(c).prependTo(a):t(c).insertAfter(a),t(".modal-backdrop").on("click",".ajax-loading",function(){t(this).parent().remove()})}else"document"===a.selector||"body"===a.selector?a.find("div#mdl"+n).remove():a.next("div#mdl"+n).remove()})},e.openWindow=function(e){var t=window.open(e);t||Aurora.message([{text:KA_vars.language.COM_KA_NEWWINDOW_BLOCKED_A+e+KA_vars.language.COM_KA_NEWWINDOW_BLOCKED_B,type:"alert"}],"#system-message-container",{replace:!0})},e.formatItemTitle=function(e,t,a,n){var r="";return empty(e)?"":("undefined"==typeof e||empty(e)||(r+=e),empty(e)||empty(t)||(r+="undefined"==typeof n||empty(n)?" / ":n),"undefined"==typeof t||empty(t)||(r+=t),empty(a)||"0000"===a||"0000-00-00"===a||(r+=" ("+a+")"),r)}}(Kinoarhiv,document),jQuery(document).ready(function(e){jQuery.fn.select2&&e(".hasAutocomplete").each(function(t,a){if(!e(a).data("select2-disabled")){var n=e(a),r={},i=n.data("url"),o=n.data("lang")||"",l=n.data("content"),u=n.attr("multiple"),d=n.data("remote"),c=n.data("sortable"),s=n.data("minimum-input-length"),m=n.data("maximum-selection-size"),f=n.data("remote-show-all"),p=n.data("ignore-ids")||"",v=KA_vars.api_root||"",y=KA_vars.img_root||"";if(r.placeholder=empty(n.data("placeholder"))?KA_vars.language.JGLOBAL_SELECT_AN_OPTION:n.data("placeholder"),r.allowClear=n.data("allow-clear"),s&&(r.minimumInputLength=parseInt(s,10)),m&&(r.maximumSelectionSize=parseInt(m,10)),d===!0||d===!1&&e.inArray(l,["countries","vendors","genres-movie","genres-name","tags","amplua"]))u&&(r.multiple=!0),i||(empty(p)||(p="&ignore_ids[]="+[p].join("&ignore_ids[]=")),empty(o)||(o="&data_lang="+o),i=v+"index.php?option=com_kinoarhiv&task=api.data&content="+l+"&format=json&tmpl=component&lang="+KA_vars.language.tag.substr(0,2)+o+p+"&"+Kinoarhiv.getFormToken()+"=1"),r.id=function(e){return empty(n.data("key"))?e.value:e[n.data("key")]},r.ajax={cache:!0,url:i,quietMillis:250,data:function(e,t){return{term:e,showAll:f?1:0,page:t}},results:function(e,t){var a=30*t<e.total_count;return{results:e,more:a}}},r.initSelection=function(t,a){var n=e(t).val();empty(n)||e.ajax(i,{data:{id:n,multiple:u?1:0},cache:!0}).done(function(e){a(e)})};else if("true"===c||c){var h=n.data("content-value"),g=h.length;u&&(r.multiple=!0),r.initSelection=function(t,a){var n=[];"countries"===l?e(t.val().split(",")).each(function(){var e=0;for(e;g>e;e++)h[e].value==this&&n.push({value:h[e].value,text:h[e].text,code:h[e].code})}):e(t.val().split(",")).each(function(){var e=0;for(e;g>e;e++)h[e].value==this&&n.push({value:h[e].value,text:h[e].text})}),a(n)},r.id=function(e){return empty(n.data("key"))?e.value:e[n.data("key")]},r.query=function(e){var t={results:[]},a=0;if("countries"===l)for(a;g>a;a++)t.results.push({value:h[a].value,text:h[a].text,code:h[a].code});else t=h;e.callback(t)}}r.formatResult=function(t){var a="";if("countries"===l){if(t.length<1)return"";var n=d===!0||"true"===c||c?t.code:e(t.element).data("country-code");return'<img class="flag-dd" src="'+y+"media/com_kinoarhiv/images/icons/countries/"+n+'.png"/>'+t.text}if("names"===l)return d===!0?Kinoarhiv.formatItemTitle(t.name,t.latin_name,t.date_of_birth):t.text;if("movies"===l){var r=d===!0||"true"===c||c?t.year:e(t.element).data("year");return a=empty(t.text)?t.title:t.text,Kinoarhiv.formatItemTitle(a,"",r)}return t.text},r.formatSelection=function(t){var a="";if("countries"===l){if(t.length<1)return"";var n=d===!0||"true"===c||c?t.code:e(t.element).data("country-code");return'<img class="flag-dd" src="'+y+"media/com_kinoarhiv/images/icons/countries/"+n+'.png"/>'+t.text}if("names"===l)return d===!0?Kinoarhiv.formatItemTitle(t.name,t.latin_name,t.date_of_birth):t.text;if("movies"===l){var r=d===!0||"true"===c||c?t.year:e(t.element).data("year");return a=empty(t.text)?t.title:t.text,Kinoarhiv.formatItemTitle(a,"",r)}return t.text},r.escapeMarkup=function(e){return e};var x=n.select2(r);("true"===c||c)&&x.select2("container").find("ul.select2-choices").sortable({containment:"parent",start:function(){n.select2("onSortStart")},update:function(){n.select2("onSortEnd")}})}}),jQuery.fn.slider&&e(".hasSlider").each(function(t,a){var n=e(a);if(!n.data("slider-disabled")){var r=n.slider();r.on("slide",function(t){"undefined"==typeof n.data("slider-input-min")||empty(n.data("slider-input-min"))||e(n.data("slider-input-min")).val(t.value[0]),"undefined"==typeof n.data("slider-input-max")||empty(n.data("slider-input-max"))||e(n.data("slider-input-max")).val(t.value[1])})}})});